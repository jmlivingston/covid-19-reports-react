{"version":3,"sources":["maps/CountryMap.js","maps/us/report-service.js","maps/us/USByState.js"],"names":["HighchartsReact","lazy","exporting","Highcharts","map","setOptions","chart","style","fontFamily","CountryMap","baseColor","borderLines","colorKey","colorMaxValue","colorMinValue","colorValueInterval","data","hoverColor","mapData","separatorLines","seriesJoinBy","stateBorderColor","title","tooltipFormat","tooltipHeader","tooltipSuffix","tooltipTitle","color","Color","separatorLineData","name","shadow","type","options","colorAxis","max","min","stops","key","tickInterval","enabled","buttons","contextButton","menuItems","getOptions","text","onclick","window","location","href","legend","backgroundColor","defaultOptions","floating","layout","align","mapNavigation","buttonOptions","verticalAlign","plotOptions","mapline","showInLegend","enableMouseTracking","series","borderWidth","dataLabels","format","joinBy","states","hover","tooltip","pointFormat","headerFormat","valueSuffix","fallback","className","constructorType","highcharts","defaultProps","getTitle","summary","deaths","toLocaleString","cases","Date","lastUpdated","toLocaleDateString","toLocaleTimeString","USByState","useParams","reportType","useState","setData","maxValue","setMaxValue","useEffect","a","stateData","default","sort","b","length","Math","round","hasSeparatorLines","charAt","toUpperCase","slice"],"mappings":"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","file":"static/js/5.669c80bd.chunk.js","sourcesContent":["import Color from 'color'\nimport Highcharts from 'highcharts'\nimport exporting from 'highcharts/modules/exporting'\nimport map from 'highcharts/modules/map'\nimport PropTypes from 'prop-types'\nimport React, { lazy, Suspense } from 'react'\nimport Loader from '../core/Loader'\n// import darkUnica from 'highcharts/themes/dark-unica'\nimport './CountryMap.css'\n\nconst HighchartsReact = lazy(() => import('highcharts-react-official'))\n\nexporting(Highcharts)\nmap(Highcharts)\n// darkUnica(Highcharts)\n\nHighcharts.setOptions({\n  chart: {\n    style: {\n      fontFamily: 'Lato',\n    },\n  },\n})\n\nconst DEFAULT_BORDER_COLOR = '#DDDDDD'\n\nfunction CountryMap({\n  baseColor = '#FF0000',\n  borderLines,\n  colorKey = 'value',\n  colorMaxValue,\n  colorMinValue,\n  colorValueInterval,\n  data,\n  hoverColor = '#A4EDBA',\n  mapData,\n  separatorLines,\n  seriesJoinBy,\n  stateBorderColor = DEFAULT_BORDER_COLOR,\n  title = 'Untitled',\n  tooltipFormat,\n  tooltipHeader,\n  tooltipSuffix,\n  tooltipTitle,\n}) {\n  const color = Color(baseColor)\n\n  const colorStops = [\n    // First stop tweaked slightly for better visibility. Should actually be 0.\n    ...[0.025, 0.25, 0.5, 0.75].map((key) => [\n      key,\n      `rgba(${color.color[0]}, ${color.color[1]}, ${color.color[2]}, ${key})`,\n    ]),\n    [1, `rgb(${color.color[0]}, ${color.color[1]}, ${color.color[2]})`],\n  ]\n\n  const separatorLineData = separatorLines\n    ? {\n        color: DEFAULT_BORDER_COLOR,\n        data: separatorLines,\n        name: 'Separator',\n        shadow: false,\n        type: 'mapline',\n      }\n    : {}\n\n  const options = {\n    chart: {\n      fontFamily: 'Lato',\n    },\n    colorAxis: {\n      max: colorMaxValue,\n      min: colorMinValue,\n      stops: colorStops,\n      tickInterval: colorValueInterval,\n    },\n    exporting: {\n      enabled: true,\n      buttons: {\n        contextButton: {\n          menuItems: [\n            ...Highcharts.getOptions().exporting.buttons.contextButton.menuItems,\n            'separator',\n            {\n              text: 'County',\n              onclick: () => (window.location.href = '/county'),\n            },\n            {\n              text: 'State',\n              onclick: () => (window.location.href = '/'),\n            },\n          ],\n        },\n      },\n    },\n    legend: {\n      backgroundColor:\n        Highcharts.defaultOptions &&\n        Highcharts.defaultOptions.legend &&\n        Highcharts.defaultOptions.legend.backgroundColor,\n      floating: true,\n      layout: 'vertical',\n      align: 'right',\n    },\n    mapNavigation: {\n      buttonOptions: {\n        verticalAlign: 'bottom',\n      },\n      enabled: true,\n    },\n    plotOptions: {\n      map: {\n        colorKey,\n      },\n      mapline: {\n        showInLegend: false,\n        enableMouseTracking: false,\n      },\n    },\n    series: [\n      {\n        borderWidth: 0.5,\n        data,\n        dataLabels: {\n          enabled: true,\n          format: '{point.properties.postal-code}',\n        },\n        joinBy: seriesJoinBy,\n        mapData,\n        name: tooltipTitle,\n        shadow: false,\n        states: {\n          hover: {\n            color: hoverColor,\n          },\n        },\n        tooltip: {\n          pointFormat: tooltipFormat,\n          headerFormat: tooltipHeader,\n          valueSuffix: tooltipSuffix,\n        },\n      },\n      {\n        color: stateBorderColor,\n        data: borderLines,\n        shadow: false,\n        type: 'mapline',\n      },\n      separatorLineData,\n    ],\n    title: {\n      text: title,\n    },\n  }\n\n  return colorMaxValue && colorValueInterval && data && mapData && seriesJoinBy ? (\n    <Suspense fallback={<Loader />}>\n      <div className=\"highcharts-wrapper\">\n        <HighchartsReact constructorType={'mapChart'} highcharts={Highcharts} options={options} />\n      </div>\n    </Suspense>\n  ) : (\n    'The following props are required: colorMaxValue, colorValueInterval, data, mapData, and seriesJoinBy'\n  )\n}\n\nCountryMap.defaultProps = {\n  baseColor: '#FF0000',\n  colorKey: 'value',\n  hoverColor: '#A4EDBA',\n  stateBorderColor: DEFAULT_BORDER_COLOR,\n  title: 'Untitled',\n}\n\nCountryMap.propTypes = {\n  baseColor: PropTypes.string,\n  borderLines: PropTypes.array,\n  colorKey: PropTypes.string,\n  colorMaxValue: PropTypes.number.isRequired,\n  colorMinValue: PropTypes.number,\n  colorValueInterval: PropTypes.number.isRequired,\n  data: PropTypes.array.isRequired,\n  hoverColor: PropTypes.string,\n  mapData: PropTypes.object.isRequired,\n  separatorLines: PropTypes.array,\n  seriesJoinBy: PropTypes.string.isRequired,\n  stateBorderColor: PropTypes.string,\n  title: PropTypes.string,\n  tooltipFormat: PropTypes.string,\n  tooltipHeader: PropTypes.string,\n  tooltipSuffix: PropTypes.string,\n  tooltipTitle: PropTypes.string,\n}\n\nexport default CountryMap\n","import summary from './us-summary.json'\n\nfunction getTitle({ title }) {\n  return `<span style=\"font-size:24px;\">COVID-19: ${title}</span><br /><span style=\"font-size:16px;\">Deaths: ${summary.deaths.toLocaleString(\n    'en-US'\n  )} | Cases: ${summary.cases.toLocaleString('en-US')}</span><br />\n  <span style=\"font-size:12px; color: #333333\">\n    Source: </span>\n    <a style=\"font-size:12px; text-decoration:underline; color: #333333\" href=\"https://www.nytimes.com/interactive/2020/us/coronavirus-us-cases.html\" target=\"_blank\">The New York Times</a><span style=\"font-size:12px; color: #333333\"> | Last Updated: ${new Date(\n      summary.lastUpdated\n    ).toLocaleDateString()} ${new Date(summary.lastUpdated).toLocaleTimeString()}</span>`\n}\n\nexport { getTitle }\n","import mapData from '@highcharts/map-collection/countries/us/us-all.geo.json'\nimport React, { useEffect, useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport Loader from '../../core/Loader'\nimport CountryMap from '../../maps/CountryMap'\nimport { getTitle } from './report-service'\nimport separatorLines from './us-separator-lines.json'\n\nfunction USByState() {\n  const { reportType = 'deaths' } = useParams()\n  const [data, setData] = useState([])\n  const [maxValue, setMaxValue] = useState(0)\n  useEffect(() => {\n    setData([])\n    ;(async () => {\n      const stateData = await import('./us-states-total.json')\n      setData(stateData.default)\n      setMaxValue(stateData.default.sort((a, b) => (a[reportType] > b[reportType] ? -1 : 1))[0][reportType])\n    })()\n  }, [reportType])\n  return data.length ? (\n    <CountryMap\n      baseColor=\"#FF0000\"\n      colorKey={reportType}\n      colorMaxValue={maxValue}\n      colorMinValue={0}\n      colorValueInterval={Math.round(maxValue / 5)}\n      data={data}\n      hasSeparatorLines={true}\n      hoverColor=\"#A4EDBA\"\n      mapData={mapData}\n      separatorLines={separatorLines}\n      seriesJoinBy={'fips'}\n      title={getTitle({ title: `USA State ${reportType.charAt(0).toUpperCase() + reportType.slice(1)}` })}\n      tooltipFormat=\"Deaths: {point.deaths}<br />Cases: {point.cases}<br />\"\n      tooltipHeader=\"{point.key}<br />\"\n      tooltipSuffix=\"\"\n    />\n  ) : (\n    <Loader />\n  )\n}\n\nexport default USByState\n"],"sourceRoot":""}